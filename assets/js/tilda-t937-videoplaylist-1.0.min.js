function t937_init(e,t){var l=document.getElementById("rec"+e);if(l){var i=l.querySelector(".t937__playlist-wrap"),n=l.querySelector(".t937__col_video"),r=t937_parseData(e),o,a=t937_getUrlParametrs(e).activeVideoId;t937_setSizes(e,t),t937_renderVideoCount(r,e,t),t937_renderPlaylist(r,a,e,t),t937_renderVideoFrame(r,a,e,t),n&&(n.style.height=""),i&&(i.style.visibility="visible"),t937_addEvents(e,t)}}function t937_getUrlParametrs(e){var t,l,i=window.location.hash;if(i&&-1===i.indexOf("#tlection="))t=e,l=1;else{var n=i.replace("#tlection=","").split("_");l=+e==+(t=n[0])?n[1]:1}return{activeRecId:t,activeVideoId:l}}function t937_parseData(e){var t=document.getElementById("rec"+e);if(t){var l=t?t.querySelector(".t937__data"):null,i=l?l.innerHTML:"",n=[];if(i)for(var r=(i=i.replace(/&amp;/gi,"&")).split("\n"),o=0;o<r.length;o++){var a,d,s=t937_getVideoData(r[o].split(";"));(s.url||s.section)&&n.push(s)}return n}}function t937_getVideoData(e){var t=e[0].trim();if(0===t.indexOf("[")&&t.indexOf("]")===t.length-1)return{section:t.slice(1,-1)};var l=e[0]&&e[0].length?e[0].trim():null,i=e[1]?e[1].trim():null,n=e[2]?e[2].trim():null,r=e[3]?e[3].trim():null,o=null;return/youtube.com|youtu.be/gi.test(l)&&(o="youtube"),/vimeo.com/gi.test(l)&&(o="vimeo"),/.mp4/gi.test(l)&&(o="mp4"),{url:l,title:i,time:n,description:r,type:o}}function t937_renderPlaylist(e,t,l,i){var n,r=document.getElementById("rec"+l).querySelector(".t937__playlist");r&&(r.dataVideoContent=e),r&&(r.dataPlaylistStyles=i);var o=1;t937_setSizes(l,i),r&&(r.innerHTML="");var a=i.mainColor.length?"color: "+i.mainColor+";":"",d=i.secondaryColor.length?"color: "+i.secondaryColor+";":"",s=i.borderColor.length?"border-bottom: 1px solid "+i.borderColor+";":"";t937_renderFade(l,i.bgColor);for(var c=0;c<e.length;c++){var u=e[c],m=c+1,_=Number(m)===Number(t),y;if(Object.prototype.hasOwnProperty.call(u,"section")){(y=document.createElement("div")).classList.add("t937__playlist-item"),y.classList.add("t937__playlist-item_section"),y.setAttribute("style",s);var v=document.createElement("div");v.classList.add("t937__playlist-section"),v.classList.add("t-name"),v.classList.add("t-name_xs"),v.setAttribute("style",a),v.textContent=u.section,y.insertAdjacentElement("beforeend",v)}else{var g=u.title&&u.title.length?u.title:t937_translate("videoTitle"),p=u.time?u.time:"",f=_&&i.linkBgColor.length?"background-color: "+i.linkBgColor+";":"";(y=document.createElement("div")).classList.add("t937__playlist-item"),y.setAttribute("data-video-id",m.toString()),y.setAttribute("style",s),y.setAttribute("onclick","window.t937_onVideoClick("+m+", "+l+")");var h=document.createElement("div");_?(h.classList.add("t937__playlist-link"),h.classList.add("t-text"),h.classList.add("t-text_xs"),h.classList.add("t937__playlist-link_active")):(h.classList.add("t937__playlist-link"),h.classList.add("t-text"),h.classList.add("t-text_xs")),h.setAttribute("style",f);var b=document.createElement("div");b.classList.add("t937__playlist-number"),b.setAttribute("style",d),b.textContent=o.toString();var E=document.createElement("div");E.classList.add("t937__playlist-title"),E.setAttribute("style",a),E.innerHTML=g;var w=document.createElement("div");w.classList.add("t937__playlist-time"),w.setAttribute("style",d),w.textContent=p,h.insertAdjacentElement("beforeend",b),h.insertAdjacentElement("beforeend",E),h.insertAdjacentElement("beforeend",w),y.insertAdjacentElement("beforeend",h),y.addEventListener("mousemove",(function(e){var t;e.target.closest(".t937__playlist-item").style.backgroundColor=i.linkBgColor.length?i.linkBgColor:"#F0F0F0"})),y.addEventListener("mouseout",(function(e){var t;e.target.closest(".t937__playlist-item").style.backgroundColor=""})),o++}r&&r.insertAdjacentElement("beforeend",y)}}function t937_renderVideoFrame(e,t,l){var i=document.getElementById("rec"+l),n,r,o=i?i.querySelector(".t937__video"):null,a=o?.5625*o.offsetWidth:0,d;o&&o.classList.remove("t937__video_empty");for(var s=t-1;s<e.length;s++)if(e[s].url){t937_renderDescription(r=e[s],l);break}if(e.length&&r&&r.type){if("youtube"===r.type){var c=/youtu(?:.*\/v\/|.*v\=|\.be\/)([A-Za-z0-9_\-]{11})/;null!==(d=r.url.match(c))&&(d=d[1]),(n=document.createElement("iframe")).classList.add("t937__video-frame"),n.classList.add("t937__video-frame_youtube"),n.width="100%",n.height=a.toString(),n.src="https://www.youtube.com/embed/"+d+"?rel=0&fmt=18&html5=1&enablejsapi=1",n.frameBorder="0",n.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),n.setAttribute("allowfullscreen","")}else if("vimeo"===r.type){var u=/vimeo[^/]*\/(\d+)\/?(\w*)\/?/i.exec(r.url);d=u?u[1]:null;var m=u?"?h="+u[2]:null,_=/#t=(\d*h)?(\d*m)?\d*s$/i.exec(r.url),y=_?"/"+_[0]:"";d?((n=document.createElement("iframe")).classList.add("t937__video-frame"),n.classList.add("t937__video-frame_vimeo"),n.title="vimeo-player",n.width="100%",n.height=a.toString(),n.src="https://player.vimeo.com/video/"+d+m+y,n.frameBorder="0",n.setAttribute("allowfullscreen","")):(o&&o.classList.add("t937__video_empty"),(n=document.createElement("div")).classList.add("t937__system-message"),n.textContent=t937_translate("wrongFormat"))}else if("mp4"===r.type){(n=document.createElement("video")).classList.add("t937__video-frame"),n.classList.add("t937__video-frame_html5"),n.controls=!0,n.title="html5-player",n.style.width="100%",n.height=a;var v=document.createElement("source");v.src=r.url,v.setAttribute("type","video/mp4"),n.insertAdjacentElement("afterbegin",v)}}else o&&o.classList.add("t937__video_empty"),(n=document.createElement("div")).classList.add("t937__system-message"),n.textContent=e.length?t937_translate("wrongFormat"):t937_translate("noData");o&&(o.innerHTML="",o.insertAdjacentElement("beforeend",n))}function t937_renderDescription(e,t){var l=document.getElementById("rec"+t),i=l?l.querySelector(".t937__col_description"):null,n=i?i.querySelector(".t937__video-title"):null,r=i?i.querySelector(".t937__video-description"):null;if(i&&i.classList.add("t937__col_hidden"),n&&(n.innerHTML=""),r&&(r.innerHTML=""),e.description){i&&i.classList.remove("t937__col_hidden");var o=e.title&&e.title.length?e.title:t937_translate("videoTitle");r.innerHTML=e.description,n.innerHTML=o}}function t937_renderVideoCount(e,t,l){var i=document.getElementById("rec"+t),n=i?i.querySelector(".t937__subheading-title"):null,r=i?i.querySelector(".t937__subheading-icon"):null,o=0,a=l.secondaryColor.length?l.secondaryColor.replace("#","%23"):"%23111111";for(var d in r&&(r.style.backgroundImage="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' width='16' height='16'%3E%3Ctitle%3Evideo playlist%3C/title%3E%3Cg class='nc-icon-wrapper' stroke-width='1' fill='"+a+"' stroke='"+a+"'%3E%3Crect x='0.5' y='2.5' width='15' height='12' rx='1' fill='none' stroke='"+a+"' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpolygon points='6.5 5.5 11.5 8.5 6.5 11.5 6.5 5.5' fill='none' stroke-linecap='round' stroke-linejoin='round' data-color='color-2'/%3E%3Cline x1='3.5' y1='0.5' x2='12.5' y2='0.5' fill='none' stroke='"+a+"' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3C/svg%3E\""),e)e[d].section||o++;var s=t937_translate("videoPart");n&&(n.textContent=o+" "+s)}function t937_renderFade(e,t){t=t.length?t:"#ffffff";var l=document.getElementById("rec"+e),i=l?l.querySelector(".t937__playlist-fade"):null,n=t937_hex2rgb(t,0),r=t937_hex2rgb(t,1);i&&(i.style.backgroundImage="linear-gradient("+n+" 0%, "+r+" 90%)")}function t937_setSizes(e,t){var l=document.getElementById("rec"+e),i=l?l.querySelector(".t937__playlist-wrap"):null,n=l?l.querySelector(".t937__video-frame"):null,r=l?l.querySelector(".t937__col_playlist"):null,o=l?l.querySelector(".t937__description"):null,a=l?l.querySelector(".t937__video"):null,d=a?a.offsetWidth:0,s=.5625*d;n&&n.setAttribute("height",s.toString()),window.innerWidth>=960?(o&&(o.style.width=d+"px"),i&&(i.style.height=s+"px"),i&&(i.style.maxHeight=""),t.playlistWidth.length&&r&&(r.style.width=parseInt(t.playlistWidth,10)+"px")):(i&&(i.style.maxHeight=s+"px"),i&&(i.style.height=""),r&&(r.style.width=""),o&&(o.style.width=""))}function t937_translate(e){var t=[];t.videoTitle={RU:"Без названия",EN:"Untitled video",FR:"Vidéo sans titre",DE:"Video ohne Titel",ES:"Video sin título",PT:"Bez tytułu wideo",UK:"Відео без назви",JA:"無題の動画",ZH:"无标题的视频",PL:"Bez tytułu"},t.videoPart={RU:"видео",EN:"videos",FR:"vidéos",DE:"videos",ES:"videos",PT:"filmy",UK:"відео",JA:"ビデオ",ZH:"影片",PL:"video"},t.noData={RU:"Пожалуйста, добавьте хотя бы одно видео в плейлист",EN:"Please add at least one video to the playlist",UK:"Будь ласка, додайте хоча б одне відео в плейлист",PL:"Proszę dodać jeden filmik do listy"},t.wrongFormat={RU:"Пожалуйста, проверьте корректность заполненных данных",EN:"Please check that the data is filled in correctly",UK:"Будь ласка, перевірте коректність заповнених даних",PL:"Sprawdź poprawność danych"};var l=(window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2),i=document.getElementById("allrecords");if(i){var n=i.getAttribute("data-tilda-project-lang");n&&(l=n)}return void 0!==t[e]?void 0!==t[e][l]&&""!==t[e][l]?t[e][l]:t[e].EN:"Text not found #"+e}function t937_hex2rgb(e,t){var l=e.replace("#","");l=l.match(new RegExp("(.{"+l.length/3+"})","g"));for(var i=0;i<l.length;i++)l[i]=parseInt(1===l[i].length?l[i]+l[i]:l[i],16);return void 0!==t&&l.push(t),"rgba("+l.join(",")+")"}function t937_addEvents(e,t){if(window.addEventListener("resize",t_throttle((function(){t937_setSizes(e,t)}))),"undefined"!=typeof jQuery)$(".t937").bind("displayChanged",(function(){t937_setSizes(e,t)}));else{var l=document.querySelectorAll(".t937");Array.prototype.forEach.call(l,(function(l){l.addEventListener("displayChanged",(function(){t937_setSizes(e,t)}))}))}var i=document.getElementById("rec"+e),n=i?i.querySelector(".t937__playlist-wrap"):null,r=i?i.querySelector(".t937__playlist-fade"):null;n&&n.addEventListener("scroll",(function(){var l,i,o,a=30;n.offsetHeight+n.scrollTop>=n.scrollHeight-30?r&&(r.style.backgroundImage=""):t937_renderFade(e,t.bgColor)}))}function t937_onVideoClick(e,t){var l=document.getElementById("rec"+t),i=l?l.querySelector(".t937__playlist"):null,n=i?i.dataVideoContent:null,r=i?i.dataPlaylistStyles:null;window.location.hash="tlection="+t+"_"+e,t937_renderPlaylist(n,e,t,r),t937_renderVideoFrame(n,e,t,r),t937_playVideo(t)}function t937_playVideo(e){var t=document.getElementById("rec"+e),l=t?t.querySelector(".t937__video-frame"):null;l&&l.classList.contains("t937__video-frame_youtube")&&l.addEventListener("load",(function(){var e="playVideo";l.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}))}"loading"!==document.readyState?document.body.style["-webkit-text-size-adjust"]="100%":document.addEventListener("DOMContentLoaded",(function(){document.body.style["-webkit-text-size-adjust"]="100%"}));